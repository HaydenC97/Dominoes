#!/usr/bin/env python
"""
A simple script that translates desired gripper width to command for
JointGroupPositionController.
"""
import rospy
import math
from std_msgs.msg import Float64MultiArray, MultiArrayDimension, Float64
from geometry_msgs.msg import Pose
from gazebo_msgs.srv import SpawnModel
import sys
import moveit_commander
import moveit_msgs.msg
import geometry_msgs.msg
from math import pi
import rospy
import actionlib
from franka_gripper.msg import GraspAction, GraspGoal, MoveGoal, MoveAction

true_robot = False

pause = 1.5 #time between instructions, seconds

def set_joints(joints):
	if true_robot == True:
		group.go(joint_goal, wait=True)
		group.stop() # makes sure no residual movements left
	else:
		for i in range(7):
			joint_publishers[i].publish(joints[i])
		rospy.sleep(pause)

def gripper_open():
	if true_robot == True:
		#rospy.init_node('Franka_gripper_move_action')
		client = actionlib.SimpleActionClient('/franka_gripper/move', MoveAction)
		client.wait_for_server()
		goal = MoveGoal(width = 0.08, speed = 0.04)
		client.send_goal(goal)
		client.wait_for_result(rospy.Duration.from_sec(5.0))
	else:
		msg.data = [0.06, 0.06]
		gripper_publishers.publish(msg)
		rospy.sleep(pause)

def gripper_close():
	if true_robot == True:
		#rospy.init_node('Franka_gripper_grasp_action')
		client = actionlib.SimpleActionClient('/franka_gripper/grasp', GraspAction)
		rospy.loginfo("CONNECTING")
		client.wait_for_server()
		action = GraspGoal(width=0.5,speed=0.08,force=1)
		rospy.loginfo("SENDING ACTION")
		client.send_goal(action)
		client.wait_for_result(rospy.Duration.from_sec(5.0))
		rospy.loginfo("DONE")
	else:
		msg.data = [0, 0]
		gripper_publishers.publish(msg)
		rospy.sleep(pause)

if __name__ == '__main__':

	if true_robot == True:
		moveit_commander.roscpp_initialize(sys.argv)
		rospy.init_node('move_group_python_interface', anonymous=True)
		robot = moveit_commander.RobotCommander()
		scene = moveit_commander.PlanningSceneInterface()
		group_name = "panda_arm"
		group = moveit_commander.MoveGroupCommander(group_name)
		display_trajectory_publisher = rospy.Publisher('/move_group/display_planned_path', moveit_msgs.msg.DisplayTrajectory, queue_size=20)
		group.set_max_acceleration_scaling_factor(0.2)
		group.set_max_velocity_scaling_factor(0.2)

		robot_state = robot.get_current_state()
		print robot_state
		joint_goal = group.get_current_joint_values()

	else:
		rospy.init_node('joint_gripper')

		#set initial joint angles and gripper position
		joints = [0, 1*math.pi/8, 0, 1*math.pi/8, 0, 6*math.pi/8, -math.pi/4]
		gripper = [0.0,0.0]

		#load in publishers for arm and gripper
		joint_publishers = [rospy.Publisher('/franka/joint{}_position_controller/command'.format(i), Float64, queue_size=1) for i in range(1, 8)]
		gripper_publishers = rospy.Publisher('/franka/gripper_position_controller/command', Float64MultiArray, queue_size=1)

		msg = Float64MultiArray()
		msg.layout.dim = [MultiArrayDimension('', 2, 1)]
		data = 0
		msg.data = gripper

		start = rospy.Time.now()

		#set starting pose
		rospy.loginfo("Setting initial pose.")
		set_joints(joints)
		gripper_close()
		rospy.sleep(pause*5)

		rospy.loginfo("Starting loop.")
		rate = rospy.Rate(10)

	while not rospy.is_shutdown():

		# Brick 1

		print "starting Brick 1"
		#start picking
		gripper_open()
		set_joints([-7.65064788517e-05-0.785497068344-7.38169741817e-05-1.570887227530.01.04719149845-8.8292111177e-06])
		# going down
		set_joints([-0.933796107761-0.793620937449-0.000487181750367-2.201430038790.01.40697572691-1.71862682499])
		set_joints([-0.930157683885-0.372848812799-0.00255151769314-1.23015326560.00.856985380034-1.71805766002])
		set_joints([-0.93497294252-0.864074494120.000431106466555-2.446281592980.01.58133869671-1.71975190357])
		set_joints([-0.933328259828-0.562640489467-0.00126888497152-3.059310369720.02.49700864305-1.71984497549])
		gripper_close()
		# going up
		set_joints([-0.933328259828-0.562640489467-0.00126888497152-3.059310369720.02.49700864305-1.71984497549])
		set_joints([-0.933328259828-0.562640489467-0.00126888497152-3.059310369720.02.49700864305-1.71984497549])
		set_joints([-0.933350222505-0.891261237667-0.000834424062275-2.734352216160.01.84302152503-1.72001498748])
		#start placing
		set_joints([-0.936044151432-0.7938891244130.00128465771158-2.201734304580.01.40704449948-1.72080451185])
		set_joints([2.79270371199-0.157253133102-9.26981352858e-05-1.685039956040.01.528205333282.00730375557])
		# going down
		set_joints([2.78994242896-0.157204358690.00257947427643-1.685114895390.01.52814069769-0.785064219033])
		set_joints([2.78994242896-0.157204358690.00257947427643-1.685114895390.01.52814069769-0.785064219033])
		set_joints([2.78508039059-0.1665751807530.00724099108023-2.170563179030.02.0037919643-0.785621076636])
		set_joints([2.791609441570.09380028498530.000998519017938-2.387970399430.02.48096634674-0.785560590812])
		gripper_open()
		# going up
		set_joints([2.791609441570.09380028498530.000998519017938-2.387970399430.02.48096634674-0.785560590812])
		set_joints([2.791609441570.09380028498530.000998519017938-2.387970399430.02.48096634674-0.785560590812])
		set_joints([2.78916305599-0.1663836047680.00336841206176-2.170138399830.02.00333963402-0.786004030566])

		# Brick 2

		print "starting Brick 2"
		#start picking
		gripper_open()
		set_joints([2.7873000511-0.1571734305840.00493021671302-1.684969578420.01.52769227446-0.786824813048])
		# going down
		set_joints([-0.758295932031-0.2603864217220.00274112050336-1.792528298730.01.53289382699-1.54090030903])
		set_joints([-0.758295932031-0.2603864217220.00274112050336-1.792528298730.01.53289382699-1.54090030903])
		set_joints([-0.754907294551-0.267188239664-0.000116757795065-2.274459029560.02.00648012855-1.54025400487])
		set_joints([-0.7549483458610.00995038697742-0.000270342338242-2.499959746640.02.50976778392-1.54076360272])
		gripper_close()
		# going up
		set_joints([-0.7549483458610.00995038697742-0.000270342338242-2.499959746640.02.50976778392-1.54076360272])
		set_joints([-0.7549483458610.00995038697742-0.000270342338242-2.499959746640.02.50976778392-1.54076360272])
		set_joints([-0.756149199707-0.2673783514410.00115809647183-2.274331542270.02.00623377677-1.54088038797])
		#start placing
		set_joints([-0.754087032629-0.260454198661-0.000886801104243-1.792189938370.01.53176656905-1.54079449053])
		set_joints([2.79510206068-0.157006499905-0.00231363678261-1.684586503340.01.527840422492.00769741041])
		# going down
		set_joints([2.7958607259-0.156883353091-0.00283419147983-1.684395364310.01.52675667334-0.785107088397])
		set_joints([2.7958607259-0.156883353091-0.00283419147983-1.684395364310.01.52675667334-0.785107088397])
		set_joints([2.78897021346-0.1950536498560.00340881146653-1.944100424390.01.74844766402-0.785482742717])
		set_joints([2.79866214237-0.176030861127-0.00572190115341-2.14166601440.01.96599399913-0.784866250067])
		gripper_open()
		# going up
		set_joints([2.79866214237-0.176030861127-0.00572190115341-2.14166601440.01.96599399913-0.784866250067])
		set_joints([2.79866214237-0.176030861127-0.00572190115341-2.14166601440.01.96599399913-0.784866250067])
		set_joints([2.79454520583-0.195263431847-0.00193880702584-1.944544197690.01.7490662253-0.784872113704])

		# Brick 3

		print "starting Brick 3"
		#start picking
		gripper_open()
		set_joints([2.78318677681-0.1569536042260.00880076947606-1.684763020650.01.52782692653-0.787041132511])
		# going down
		set_joints([-1.08120733764-0.571410041211-0.000797607176502-2.060182493570.01.48781073666-1.86661412814])
		set_joints([-1.08270965681-0.5724097105550.000177437659168-2.06164051920.01.4902996117-1.86808764019])
		set_joints([-1.08134841765-0.606815898894-0.000941797472282-2.562098157440.01.95412115992-1.86670721388])
		set_joints([-1.07934207174-0.281719708291-0.00349637158782-2.830614575330.02.54924834868-1.86811436731])
		gripper_close()
		# going up
		set_joints([-1.07934207174-0.281719708291-0.00349637158782-2.830614575330.02.54924834868-1.86811436731])
		set_joints([-1.07934207174-0.281719708291-0.00349637158782-2.830614575330.02.54924834868-1.86811436731])
		set_joints([-1.08311507861-0.6073628059670.000675491644436-2.562439502480.01.9546265833-1.86735188288])
		#start placing
		set_joints([-1.08115147066-0.571888565869-0.0010742005782-2.060743391750.01.48896088217-1.8682348814])
		set_joints([2.43932159163-0.158740053110.00441845318441-1.686619918880.01.528209384911.65808664291])
		# going down
		set_joints([2.44717568464-0.157883648656-0.00294517725636-1.685572174150.01.52688077459-0.784545793619])
		set_joints([2.44366223877-0.1582002613240.000306893670423-1.685648131670.01.52673004707-0.786318161712])
		set_joints([2.43951541339-0.1677136212460.00425678742657-2.171646340290.02.00343816023-0.786289398686])
		set_joints([2.442296044480.09239477336570.0017861461899-2.390087831850.02.48332989953-0.785904215434])
		gripper_open()
		# going up
		set_joints([2.442296044480.09239477336570.0017861461899-2.390087831850.02.48332989953-0.785904215434])
		set_joints([2.442296044480.09239477336570.0017861461899-2.390087831850.02.48332989953-0.785904215434])
		set_joints([2.44558498787-0.167647322167-0.00151194756984-2.171646810560.02.00383622311-0.786157022995])

		# Brick 4

		print "starting Brick 4"
		#start picking
		gripper_open()
		set_joints([2.45011065497-0.158530921882-0.00548542192383-1.686463439240.01.52796750032-0.784605434056])
		# going down
		set_joints([-1.56891653852-0.695413006024-0.00132204270804-2.144560318540.01.44942085775-2.35579859713])
		set_joints([-1.56891653852-0.695413006024-0.00132204270804-2.144560318540.01.44942085775-2.35579859713])
		set_joints([-1.57027562323-0.760137763986-0.000487765346175-2.662379346120.01.90297310098-2.35633315491])
		set_joints([-1.57225390068-0.4254737997080.0020514779829-2.95828784280.02.53258015905-2.35506374473])
		gripper_close()
		# going up
		set_joints([-1.57225390068-0.4254737997080.0020514779829-2.95828784280.02.53258015905-2.35506374473])
		set_joints([-1.57225390068-0.4254737997080.0020514779829-2.95828784280.02.53258015905-2.35506374473])
		set_joints([-1.57073056605-0.759739469411-0.000156278258323-2.661905885070.01.90151038942-2.35622915617])
		#start placing
		set_joints([-1.56944136109-0.695030690667-0.000947809021664-2.144011963530.01.44860251116-2.35472990245])
		set_joints([2.44060354649-0.1584779684870.00320486724715-1.686359097790.01.528472272781.65823650429])
		# going down
		set_joints([2.44449522864-0.158363844782-0.000384837462818-1.686181759180.01.52842344377-0.785269118154])
		set_joints([2.44449522864-0.158363844782-0.000384837462818-1.686181759180.01.52842344377-0.785269118154])
		set_joints([2.44040058847-0.1969893490340.00327936929787-1.946558870470.01.75011925112-0.786780950102])
		set_joints([2.44276048688-0.1772872356440.00133362036153-2.143202305260.01.9661020303-0.785972942041])
		gripper_open()
		# going up
		set_joints([2.44276048688-0.1772872356440.00133362036153-2.143202305260.01.9661020303-0.785972942041])
		set_joints([2.44276048688-0.1772872356440.00133362036153-2.143202305260.01.9661020303-0.785972942041])
		set_joints([2.44446906832-0.196765426861-0.000302751788602-1.946305904390.01.75041351757-0.784775700314])

		# Brick 5

		print "starting Brick 5"
		#start picking
		gripper_open()
		set_joints([2.44557044359-0.158480554584-0.00146110158486-1.686183174120.01.52761081993-0.784517638693])
		# going down
		set_joints([-2.05663562607-0.571377684285-0.00178423452353-2.060259165710.01.48835806131-2.84423709028])
		set_joints([-2.05663562607-0.571377684285-0.00178423452353-2.060259165710.01.48835806131-2.84423709028])
		set_joints([-2.05773548893-0.607193625415-0.00148604800999-2.562380769730.01.95532278002-2.84514314482])
		set_joints([-2.06048795895-0.2812147839840.00157249431291-2.830872673780.02.55034964241-2.8442159686])
		gripper_close()
		# going up
		set_joints([-2.06048795895-0.2812147839840.00157249431291-2.830872673780.02.55034964241-2.8442159686])
		set_joints([-2.06048795895-0.2812147839840.00157249431291-2.830872673780.02.55034964241-2.8442159686])
		set_joints([-2.05771232971-0.607363128564-0.00131573153619-2.562805503030.01.956360433-2.84401014742])
		#start placing
		set_joints([-2.05729914839-0.572063826971-0.00149944265112-2.06109794830.01.48958893315-2.84317671998])
		set_joints([-2.05729914839-0.572063826971-0.00149944265112-2.06109794830.01.48958893315-2.84317671998])
		# going down
		set_joints([-2.05729914839-0.572063826971-0.00149944265112-2.06109794830.01.48958893315-2.84317671998])
		set_joints([2.10149829143-0.15751744508-0.0065128237324-1.68500929720.01.52745572236-0.785646799588])
		set_joints([2.09532338646-0.167113744913-0.000983325148477-2.171332495220.02.00504117864-0.784727256691])
		set_joints([2.090927889980.09311390399550.00326676211489-2.389059795310.02.48213811512-0.785476074004])
		gripper_open()
		# going up
		set_joints([2.090927889980.09311390399550.00326676211489-2.389059795310.02.48213811512-0.785476074004])
		set_joints([2.090927889980.09311390399550.00326676211489-2.389059795310.02.48213811512-0.785476074004])
		set_joints([2.09159612862-0.1670952441550.00274158974157-2.171493935440.02.00507565073-0.786458136296])

		# Brick 6

		print "starting Brick 6"
		#start picking
		gripper_open()
		set_joints([2.100575249-0.157334754401-0.00567320546466-1.685117800990.01.52750739105-0.783963745714])
		# going down
		set_joints([2.100575249-0.157334754401-0.00567320546466-1.685117800990.01.52750739105-0.783963745714])
		set_joints([2.100575249-0.157334754401-0.00567320546466-1.685117800990.01.52750739105-0.783963745714])
		set_joints([2.100575249-0.157334754401-0.00567320546466-1.685117800990.01.52750739105-0.783963745714])
		set_joints([2.100575249-0.157334754401-0.00567320546466-1.685117800990.01.52750739105-0.783963745714])
		gripper_close()
		# going up
		set_joints([2.100575249-0.157334754401-0.00567320546466-1.685117800990.01.52750739105-0.783963745714])
		set_joints([2.100575249-0.157334754401-0.00567320546466-1.685117800990.01.52750739105-0.783963745714])
		set_joints([2.100575249-0.157334754401-0.00567320546466-1.685117800990.01.52750739105-0.783963745714])
		#start placing
		set_joints([2.100575249-0.157334754401-0.00567320546466-1.685117800990.01.52750739105-0.783963745714])
		set_joints([2.092903267-0.1577912267280.00155567470708-1.685627313120.01.528203364971.30941612554])
		# going down
		set_joints([2.0939726999-0.1571163946820.000427887280661-1.684633799030.01.52655083375-0.784739291254])
		set_joints([2.0939726999-0.1571163946820.000427887280661-1.684633799030.01.52655083375-0.784739291254])
		set_joints([2.08924209626-0.1957047265120.00483336833975-1.945222298340.01.74989264514-0.785000940522])
		set_joints([2.08932837912-0.1759805446310.00502666194319-2.141579747830.01.96524067069-0.784842074364])
		gripper_open()
		# going up
		set_joints([2.08932837912-0.1759805446310.00502666194319-2.141579747830.01.96524067069-0.784842074364])
		set_joints([2.08932837912-0.1759805446310.00502666194319-2.141579747830.01.96524067069-0.784842074364])
		set_joints([2.09159085554-0.1962012034720.0026274470073-1.945827885570.01.75031774965-0.78522602167])

		# Brick 7

		print "starting Brick 7"
		#start picking
		gripper_open()
		set_joints([2.09632770649-0.15716678535-0.00190092160624-1.684731934660.01.52702909114-0.785371484431])
		# going down
		set_joints([2.09632770649-0.15716678535-0.00190092160624-1.684731934660.01.52702909114-0.785371484431])
		set_joints([2.09632770649-0.15716678535-0.00190092160624-1.684731934660.01.52702909114-0.785371484431])
		set_joints([2.09632770649-0.15716678535-0.00190092160624-1.684731934660.01.52702909114-0.785371484431])
		set_joints([-0.8729213347910.174240952565-0.00554217945431-2.274783725440.02.44887181351-1.66371273875])
		gripper_close()
		# going up
		set_joints([-0.8729213347910.174240952565-0.00554217945431-2.274783725440.02.44887181351-1.66371273875])
		set_joints([-0.8729213347910.174240952565-0.00554217945431-2.274783725440.02.44887181351-1.66371273875])
		set_joints([-0.872540224314-0.0689136058832-0.0059083223168-2.061076615270.01.9911364937-1.66366718378])
		#start placing
		set_joints([-0.872540224314-0.0689136058832-0.0059083223168-2.061076615270.01.9911364937-1.66366718378])
		set_joints([1.74609827295-0.158231548615-0.000219954588194-1.685709352240.01.526311266240.95965917202])
		# going down
		set_joints([1.74416021206-0.1590208424490.00160324032225-1.686880438410.01.52884757299-0.784778824795])
		set_joints([1.74825479096-0.168286172459-0.00240166472868-2.171978365690.02.00333642842-0.784572200164])
		set_joints([1.74522455771-0.07112309305650.000595404589791-2.314167802920.02.24330775884-0.784599811677])
		set_joints([1.74523014210.09226408803910.000699604628089-2.39003619020.02.48193558334-0.786185857276])
		gripper_open()
		# going up
		set_joints([1.74523014210.09226408803910.000699604628089-2.39003619020.02.48193558334-0.786185857276])
		set_joints([1.74523014210.09226408803910.000699604628089-2.39003619020.02.48193558334-0.786185857276])
		set_joints([1.74114768276-0.1683524725360.00441269882127-2.172481144450.02.00441334455-0.786436512006])

		# Brick 8

		print "starting Brick 8"
		#start picking
		gripper_open()
		set_joints([1.74629161728-0.158637477968-0.000335075324032-1.686458596540.01.52816108061-0.784617424768])
		# going down
		set_joints([-1.17493231341-0.33018057707-0.00241275213871-1.859616899510.01.52922063489-1.96356147441])
		set_joints([-1.17493231341-0.33018057707-0.00241275213871-1.859616899510.01.52922063489-1.96356147441])
		set_joints([-1.17606298175-0.338660905712-0.00154381592891-2.342850036080.02.00323884308-1.96307211769])
		set_joints([-1.17574086609-0.0498230108878-0.00196704586684-2.575141080170.02.52469786646-1.96347242922])
		gripper_close()
		# going up
		set_joints([-1.17574086609-0.0498230108878-0.00196704586684-2.575141080170.02.52469786646-1.96347242922])
		set_joints([-1.17574086609-0.0498230108878-0.00196704586684-2.575141080170.02.52469786646-1.96347242922])
		set_joints([-1.17645634631-0.33874440928-0.00118725939741-2.34304216110.02.00309239497-1.96236118338])
		#start placing
		set_joints([-1.17964724065-0.3301316883030.00164575296522-1.859676915510.01.52943556127-1.96292245651])
		set_joints([1.75039111265-0.159016398323-0.00425369829783-1.687004646440.01.528576406710.960390349613])
		# going down
		set_joints([1.74632859336-0.158565061606-0.000435856548739-1.686467244670.01.52810863547-0.784430919419])
		set_joints([1.74632859336-0.158565061606-0.000435856548739-1.686467244670.01.52810863547-0.784430919419])
		set_joints([1.74206593376-0.1965720217170.00352741346332-1.946059020350.01.74928019669-0.786353014818])
		set_joints([1.74300511539-0.1774599727920.00288531391463-2.143323677680.01.9664574929-0.785760759222])
		gripper_open()
		# going up
		set_joints([1.74300511539-0.1774599727920.00288531391463-2.143323677680.01.9664574929-0.785760759222])
		set_joints([1.74300511539-0.1774599727920.00288531391463-2.143323677680.01.9664574929-0.785760759222])
		set_joints([1.74855543224-0.196768964024-0.00269276194745-1.945989555890.01.74887070084-0.786265229297])

		# Brick 9

		print "starting Brick 9"
		#start picking
		gripper_open()
		set_joints([1.74000129024-0.1583550624860.00524312745073-1.685998058420.01.52750356362-0.785535813726])
		# going down
		set_joints([-1.56906891678-0.43118886427-0.00148968618687-1.949529765490.01.51791516569-2.35627054598])
		set_joints([-1.56906891678-0.43118886427-0.00148968618687-1.949529765490.01.51791516569-2.35627054598])
		set_joints([-1.57247058107-0.4469954787150.00162951034673-2.438457692380.01.99139000416-2.35694263256])
		set_joints([-1.56895490912-0.141025339665-0.00184173940804-2.6829111090.02.54074356811-2.35567808001])
		gripper_close()
		# going up
		set_joints([-1.56895490912-0.141025339665-0.00184173940804-2.6829111090.02.54074356811-2.35567808001])
		set_joints([-1.56895490912-0.141025339665-0.00184173940804-2.6829111090.02.54074356811-2.35567808001])
		set_joints([-1.5693408386-0.447054618848-0.00137137074121-2.438844792110.01.99259298006-2.35554079821])
		#start placing
		set_joints([-1.57287094226-0.431304321670.00168401705424-1.949925933950.01.51919036125-2.3574713907])
		set_joints([1.39180406662-0.1586235239170.00371416678517-1.686446201970.01.52774730810.609355520789])
		# going down
		set_joints([1.39809235479-0.158604622126-0.00210692817748-1.686405039890.01.528315450132.35706648611])
		set_joints([1.39809235479-0.158604622126-0.00210692817748-1.686405039890.01.528315450132.35706648611])
		set_joints([1.39567932075-0.1684093610970.000150843254541-2.172653100180.02.005042150422.35632030851])
		set_joints([1.395189365570.09212462388910.000679950904363-2.390898560640.02.483979217742.35605250568])
		gripper_open()
		# going up
		set_joints([1.395189365570.09212462388910.000679950904363-2.390898560640.02.483979217742.35605250568])
		set_joints([1.395189365570.09212462388910.000679950904363-2.390898560640.02.483979217742.35605250568])
		set_joints([1.39630480882-0.167938574113-0.000637707323986-2.172096323930.02.004114117742.35581659832])

		# Brick 10

		print "starting Brick 10"
		#start picking
		gripper_open()
		set_joints([1.38875904288-0.158687378450.00638678734351-1.686447867760.01.527900047622.35536417262])
		# going down
		set_joints([-1.96073585442-0.330220983475-0.00275240866047-1.859711442050.01.52929919607-2.74889515455])
		set_joints([-1.96073585442-0.330220983475-0.00275240866047-1.859711442050.01.52929919607-2.74889515455])
		set_joints([-1.96579994317-0.339205496710.00175372322391-2.343320599060.02.00409548659-2.74870895311])
		set_joints([-1.96579994317-0.339205496710.00175372322391-2.343320599060.02.00409548659-2.74870895311])
		gripper_close()
		# going up
		set_joints([-1.96543874239-0.04959367038480.00158105027844-2.575011833520.02.52477880969-2.74986277137])
		set_joints([-1.96543874239-0.04959367038480.00158105027844-2.575011833520.02.52477880969-2.74986277137])
		set_joints([-1.96054765784-0.33891985211-0.00316508622115-2.343229349080.02.00432717975-2.74902058616])
		#start placing
		set_joints([-1.96404121598-0.3298277645140.000159281483265-1.859128035640.01.52836817847-2.7489819598])
		set_joints([1.39224005142-0.1587243634520.00327315734516-1.686430044490.01.528188055390.609231414447])
		# going down
		set_joints([1.39792753396-0.158319233592-0.0019656595286-1.685973450440.01.527233241952.35545469628])
		set_joints([1.39792753396-0.158319233592-0.0019656595286-1.685973450440.01.527233241952.35545469628])
		set_joints([1.39494964946-0.197279336380.000810634372059-1.946714250230.01.750169548132.35595470125])
		set_joints([1.3937394876-0.1776785746820.00208961190497-2.143760086940.01.96710017152.3570702679])
		gripper_open()
		# going up
		set_joints([1.3937394876-0.1776785746820.00208961190497-2.143760086940.01.96710017152.3570702679])
		set_joints([1.3937394876-0.1776785746820.00208961190497-2.143760086940.01.96710017152.3570702679])
		set_joints([1.3906202403-0.1968264818870.00495870997494-1.946169796230.01.748962739132.35633735854])

		# Brick 11

		print "starting Brick 11"
		#start picking
		gripper_open()
		set_joints([1.40282496376-0.158754477317-0.00652336105736-1.686529615340.01.528136747172.35698173061])
		# going down
		set_joints([1.40282496376-0.158754477317-0.00652336105736-1.686529615340.01.528136747172.35698173061])
		set_joints([1.40282496376-0.158754477317-0.00652336105736-1.686529615340.01.528136747172.35698173061])
		set_joints([1.40282496376-0.158754477317-0.00652336105736-1.686529615340.01.528136747172.35698173061])
		set_joints([1.40282496376-0.158754477317-0.00652336105736-1.686529615340.01.528136747172.35698173061])
		gripper_close()
		# going up
		set_joints([1.40282496376-0.158754477317-0.00652336105736-1.686529615340.01.528136747172.35698173061])
		set_joints([1.40282496376-0.158754477317-0.00652336105736-1.686529615340.01.528136747172.35698173061])
		set_joints([1.40282496376-0.158754477317-0.00652336105736-1.686529615340.01.528136747172.35698173061])
		#start placing
		set_joints([1.40282496376-0.158754477317-0.00652336105736-1.686529615340.01.528136747172.35698173061])
		set_joints([1.05371321607-0.157235746485-0.00596895611133-1.68467796010.01.527243555590.26283297809])
		# going down
		set_joints([1.05248195324-0.157651269074-0.00494346801853-1.685288234540.01.527571492022.3561168499])
		set_joints([1.05248195324-0.157651269074-0.00494346801853-1.685288234540.01.527571492022.3561168499])
		set_joints([1.04356265529-0.1668331687020.00350475710793-2.170643152880.02.003251049322.35563223619])
		set_joints([1.050093954580.0932253692542-0.00283937186401-2.388517232570.02.480691968982.35678927241])
		gripper_open()
		# going up
		set_joints([1.050093954580.0932253692542-0.00283937186401-2.388517232570.02.480691968982.35678927241])
		set_joints([1.050093954580.0932253692542-0.00283937186401-2.388517232570.02.480691968982.35678927241])
		set_joints([1.04079507916-0.1670555746690.00612407326328-2.17124414050.02.004546100712.35528120553])

		# Brick 12

		print "starting Brick 12"
		#start picking
		gripper_open()
		set_joints([1.04841748127-0.157562534382-0.00123521065928-1.685052512310.01.527453918512.35650132833])
		# going down
		set_joints([1.04841748127-0.157562534382-0.00123521065928-1.685052512310.01.527453918512.35650132833])
		set_joints([1.04841748127-0.157562534382-0.00123521065928-1.685052512310.01.527453918512.35650132833])
		set_joints([1.04841748127-0.157562534382-0.00123521065928-1.685052512310.01.527453918512.35650132833])
		set_joints([-1.239181564960.163095236643-0.00372777262797-2.291261292680.02.45481805817-2.02883708039])
		gripper_close()
		# going up
		set_joints([-1.239181564960.163095236643-0.00372777262797-2.291261292680.02.45481805817-2.02883708039])
		set_joints([-1.239181564960.163095236643-0.00372777262797-2.291261292680.02.45481805817-2.02883708039])
		set_joints([-1.23915551532-0.0821384707209-0.00375962431348-2.07667508460.01.99366476575-2.02734187301])
		#start placing
		set_joints([-1.23934620913-0.0666050693901-0.00360892242194-1.58311589810.01.51581544217-2.02744117721])
		set_joints([1.04182096669-0.1574095825830.00485146805293-1.685208113020.01.527824402390.26187709062])
		# going down
		set_joints([1.04182096669-0.1574095825830.00485146805293-1.685208113020.01.527824402390.26187709062])
		set_joints([1.04182096669-0.1574095825830.00485146805293-1.685208113020.01.527824402390.26187709062])
		set_joints([1.04391571571-0.196134210960.00293882099767-1.945748752660.01.749957354582.35599694345])
		set_joints([1.04845271017-0.176717200437-0.00127258882824-2.142419304210.01.966354732952.35632074779])
		gripper_open()
		# going up
		set_joints([1.04845271017-0.176717200437-0.00127258882824-2.142419304210.01.966354732952.35632074779])
		set_joints([1.04845271017-0.176717200437-0.00127258882824-2.142419304210.01.966354732952.35632074779])
		set_joints([1.0472079533-0.196093011315.37613930585e-05-1.945682280790.01.750265956642.35571664448])

		# Brick 13

		print "starting Brick 13"
		#start picking
		gripper_open()
		set_joints([1.04372737869-0.1578245017180.00329625587278-1.685559239960.01.528413830322.35566425393])
		# going down
		set_joints([1.04372737869-0.1578245017180.00329625587278-1.685559239960.01.528413830322.35566425393])
		set_joints([-1.56909596446-0.157305145302-0.00163736528978-1.684607969690.01.5268548705-2.35548411521])
		set_joints([-1.56840847032-0.166806166129-0.00243659005649-2.170767013260.02.00414843318-2.35532995164])
		set_joints([-1.578972765430.09301929503520.00807218124432-2.389036332610.02.48216153142-2.35546303618])
		gripper_close()
		# going up
		set_joints([-1.578972765430.09301929503520.00807218124432-2.389036332610.02.48216153142-2.35546303618])
		set_joints([-1.578972765430.09301929503520.00807218124432-2.389036332610.02.48216153142-2.35546303618])
		set_joints([-1.5672411894-0.167135166524-0.00351904409025-2.171305457620.02.00464689894-2.35671255184])
		#start placing
		set_joints([-1.57438901412-0.1571086185090.0033238927131-1.684397278170.01.52675861438-2.35563086335])
		set_joints([0.691085731851-0.1586439202820.00605357825308-1.686633730220.01.528359256-0.0885662479701])
		# going down
		set_joints([0.691085731851-0.1586439202820.00605357825308-1.686633730220.01.528359256-0.0885662479701])
		set_joints([0.698047891204-0.1579171993-0.000532825403697-1.68524143490.01.526346399622.35526340858])
		set_joints([0.69785094125-0.16746325714-0.000163973000958-2.171285065590.02.002682480462.35616210543])
		set_joints([0.7055294911880.0926862560057-0.00788172287531-2.389730083750.02.482217252512.35649126055])
		gripper_open()
		# going up
		set_joints([0.7055294911880.0926862560057-0.00788172287531-2.389730083750.02.482217252512.35649126055])
		set_joints([0.7055294911880.0926862560057-0.00788172287531-2.389730083750.02.482217252512.35649126055])
		set_joints([0.700527035181-0.167583199273-0.00295230744137-2.171269202260.02.003024607892.35657700586])

		# Brick 14

		print "starting Brick 14"
		#start picking
		gripper_open()
		set_joints([0.696864402588-0.1586591342290.000524985967974-1.686775022950.01.529210958172.35521900429])
		# going down
		set_joints([0.696864402588-0.1586591342290.000524985967974-1.686775022950.01.529210958172.35521900429])
		set_joints([0.696864402588-0.1586591342290.000524985967974-1.686775022950.01.529210958172.35521900429])
		set_joints([0.696864402588-0.1586591342290.000524985967974-1.686775022950.01.529210958172.35521900429])
		set_joints([-1.242338729710.162901826174-0.000817602681231-2.291198265360.02.45360296979-2.02809554628])
		gripper_close()
		# going up
		set_joints([-1.242338729710.162901826174-0.000817602681231-2.291198265360.02.45360296979-2.02809554628])
		set_joints([-1.242338729710.162901826174-0.000817602681231-2.291198265360.02.45360296979-2.02809554628])
		set_joints([-1.24233510815-0.0829501119229-0.000786587279829-2.077993283120.01.99590931194-2.02893644315])
		#start placing
		set_joints([-1.24233510815-0.0829501119229-0.000786587279829-2.077993283120.01.99590931194-2.02893644315])
		set_joints([0.694998556114-0.1581962119990.0023216281651-1.685704740290.01.52732961464-0.0887009847098])
		# going down
		set_joints([0.698675296761-0.158907643915-0.00105900282527-1.686850357230.01.528849487512.35621950422])
		set_joints([0.703321093729-0.167860220774-0.00557748884098-2.171947074530.02.003677069692.3556153544])
		set_joints([0.701193732799-0.172716872674-0.00341949243103-2.157634424850.01.985039685032.35595605316])
		set_joints([0.697217804516-0.1766550482060.000237440725424-2.142194078950.01.964231586322.35587392862])
		gripper_open()
		# going up
		set_joints([0.697217804516-0.1766550482060.000237440725424-2.142194078950.01.964231586322.35587392862])
		set_joints([0.697217804516-0.1766550482060.000237440725424-2.142194078950.01.964231586322.35587392862])
		set_joints([0.695498856855-0.1967106409920.00185549709728-1.946185638180.01.749556912782.35502953874])

		# Knocking
